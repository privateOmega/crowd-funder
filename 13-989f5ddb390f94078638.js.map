{"version":3,"sources":["webpack:///./node_modules/@firebase/analytics/dist/index.esm.js"],"names":["GtagCommand","EventName","GTAG_URL","wrapOrCreateGtag","initializedIdPromisesMap","dataLayerName","gtagFunctionName","gtagCore","_args","_i","arguments","length","window","push","command","idOrNameOrParams","gtagParams","EVENT","initializationPromisesToWaitFor","gaSendToList","Array","isArray","gaSendToList_1","sendToId","initializationPromise","_a","_b","Object","values","idPromise","Promise","all","then","e","console","error","CONFIG","resolve","SET","wrapGtag","wrappedGtag","gtagCoreFunction","wrappedGtagFunction","ERRORS","ERROR_FACTORY","gtagName","globalInitDone","settings","options","create","factory","app","installations","analyticsId","id","scriptTags","document","getElementsByTagName","tag","src","includes","findGtagScriptOnPage","script","createElement","async","head","appendChild","insertScriptTag","dataLayer","getOrCreateDataLayer","this","fid","label","getId","sent","Date","update","initializeGAId","logEvent","eventName","eventParams","gtagFunction","params","global","_logEvent","setCurrentScreen","screenName","_setCurrentScreen","setUserId","_setUserId","setUserProperties","properties","flatProperties","keys","key","_setUserProperties","setAnalyticsCollectionEnabled","enabled","_setAnalyticsCollectionEnabled","instance","INTERNAL","registerComponent","container","getProvider","getImmediate","setServiceProps","reason","registerVersion"],"mappings":"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","file":"13-989f5ddb390f94078638.js","sourcesContent":["import \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es7.object.values\";\nimport \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport firebase from '@firebase/app';\nimport '@firebase/installations';\nimport { __assign, __awaiter, __generator } from 'tslib';\nimport { ErrorFactory } from '@firebase/util';\nimport { Component } from '@firebase/component';\n/**\r\n * @license\r\n * Copyright 2019 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nvar ANALYTICS_ID_FIELD = 'measurementId'; // Key to attach FID to in gtag params.\n\nvar GA_FID_KEY = 'firebase_id';\nvar ORIGIN_KEY = 'origin';\nvar GTAG_URL = 'https://www.googletagmanager.com/gtag/js';\nvar GtagCommand;\n\n(function (GtagCommand) {\n  GtagCommand[\"EVENT\"] = \"event\";\n  GtagCommand[\"SET\"] = \"set\";\n  GtagCommand[\"CONFIG\"] = \"config\";\n})(GtagCommand || (GtagCommand = {}));\n/*\r\n * Officially recommended event names for gtag.js\r\n * Any other string is also allowed.\r\n */\n\n\nvar EventName;\n\n(function (EventName) {\n  EventName[\"ADD_PAYMENT_INFO\"] = \"add_payment_info\";\n  EventName[\"ADD_TO_CART\"] = \"add_to_cart\";\n  EventName[\"ADD_TO_WISHLIST\"] = \"add_to_wishlist\";\n  EventName[\"BEGIN_CHECKOUT\"] = \"begin_checkout\";\n  EventName[\"CHECKOUT_PROGRESS\"] = \"checkout_progress\";\n  EventName[\"EXCEPTION\"] = \"exception\";\n  EventName[\"GENERATE_LEAD\"] = \"generate_lead\";\n  EventName[\"LOGIN\"] = \"login\";\n  EventName[\"PAGE_VIEW\"] = \"page_view\";\n  EventName[\"PURCHASE\"] = \"purchase\";\n  EventName[\"REFUND\"] = \"refund\";\n  EventName[\"REMOVE_FROM_CART\"] = \"remove_from_cart\";\n  EventName[\"SCREEN_VIEW\"] = \"screen_view\";\n  EventName[\"SEARCH\"] = \"search\";\n  EventName[\"SELECT_CONTENT\"] = \"select_content\";\n  EventName[\"SET_CHECKOUT_OPTION\"] = \"set_checkout_option\";\n  EventName[\"SHARE\"] = \"share\";\n  EventName[\"SIGN_UP\"] = \"sign_up\";\n  EventName[\"TIMING_COMPLETE\"] = \"timing_complete\";\n  EventName[\"VIEW_ITEM\"] = \"view_item\";\n  EventName[\"VIEW_ITEM_LIST\"] = \"view_item_list\";\n  EventName[\"VIEW_PROMOTION\"] = \"view_promotion\";\n  EventName[\"VIEW_SEARCH_RESULTS\"] = \"view_search_results\";\n})(EventName || (EventName = {}));\n/**\r\n * @license\r\n * Copyright 2019 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Logs an analytics event through the Firebase SDK.\r\n *\r\n * @param gtagFunction Wrapped gtag function that waits for fid to be set before sending an event\r\n * @param eventName Google Analytics event name, choose from standard list or use a custom string.\r\n * @param eventParams Analytics event parameters.\r\n */\n\n\nfunction _logEvent(gtagFunction, analyticsId, eventName, eventParams, options) {\n  var params = eventParams || {};\n\n  if (!options || !options.global) {\n    params = __assign(__assign({}, eventParams), {\n      'send_to': analyticsId\n    });\n  } // Workaround for http://b/141370449 - third argument cannot be undefined.\n\n\n  gtagFunction(GtagCommand.EVENT, eventName, params || {});\n} // TODO: Brad is going to add `screen_name` to GA Gold config parameter schema\n\n/**\r\n * Set screen_name parameter for this Google Analytics ID.\r\n *\r\n * @param gtagFunction Wrapped gtag function that waits for fid to be set before sending an event\r\n * @param screenName Screen name string to set.\r\n */\n\n\nfunction _setCurrentScreen(gtagFunction, analyticsId, screenName, options) {\n  if (options && options.global) {\n    gtagFunction(GtagCommand.SET, {\n      'screen_name': screenName\n    });\n  } else {\n    gtagFunction(GtagCommand.CONFIG, analyticsId, {\n      update: true,\n      'screen_name': screenName\n    });\n  }\n}\n/**\r\n * Set user_id parameter for this Google Analytics ID.\r\n *\r\n * @param gtagFunction Wrapped gtag function that waits for fid to be set before sending an event\r\n * @param id User ID string to set\r\n */\n\n\nfunction _setUserId(gtagFunction, analyticsId, id, options) {\n  if (options && options.global) {\n    gtagFunction(GtagCommand.SET, {\n      'user_id': id\n    });\n  } else {\n    gtagFunction(GtagCommand.CONFIG, analyticsId, {\n      update: true,\n      'user_id': id\n    });\n  }\n}\n/**\r\n * Set all other user properties other than user_id and screen_name.\r\n *\r\n * @param gtagFunction Wrapped gtag function that waits for fid to be set before sending an event\r\n * @param properties Map of user properties to set\r\n */\n\n\nfunction _setUserProperties(gtagFunction, analyticsId, properties, options) {\n  if (options && options.global) {\n    var flatProperties = {};\n\n    for (var _i = 0, _a = Object.keys(properties); _i < _a.length; _i++) {\n      var key = _a[_i]; // use dot notation for merge behavior in gtag.js\n\n      flatProperties[\"user_properties.\" + key] = properties[key];\n    }\n\n    gtagFunction(GtagCommand.SET, flatProperties);\n  } else {\n    gtagFunction(GtagCommand.CONFIG, analyticsId, {\n      update: true,\n      'user_properties': properties\n    });\n  }\n}\n/**\r\n * Set whether collection is enabled for this ID.\r\n *\r\n * @param enabled If true, collection is enabled for this ID.\r\n */\n\n\nfunction _setAnalyticsCollectionEnabled(analyticsId, enabled) {\n  window[\"ga-disable-\" + analyticsId] = !enabled;\n}\n/**\r\n * @license\r\n * Copyright 2019 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Initialize the analytics instance in gtag.js by calling config command with fid.\r\n *\r\n * NOTE: We combine analytics initialization and setting fid together because we want fid to be\r\n * part of the `page_view` event that's sent during the initialization\r\n * @param app Firebase app\r\n * @param gtagCore The gtag function that's not wrapped.\r\n */\n\n\nfunction initializeGAId(app, installations, gtagCore) {\n  return __awaiter(this, void 0, void 0, function () {\n    var fid;\n\n    var _a;\n\n    return __generator(this, function (_b) {\n      switch (_b.label) {\n        case 0:\n          return [4\n          /*yield*/\n          , installations.getId()];\n\n        case 1:\n          fid = _b.sent(); // This command initializes gtag.js and only needs to be called once for the entire web app,\n          // but since it is idempotent, we can call it multiple times.\n          // We keep it together with other initialization logic for better code structure.\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n          gtagCore('js', new Date()); // It should be the first config command called on this GA-ID\n          // Initialize this GA-ID and set FID on it using the gtag config API.\n\n          gtagCore(GtagCommand.CONFIG, app.options[ANALYTICS_ID_FIELD], (_a = {}, _a[GA_FID_KEY] = fid, // guard against developers accidentally setting properties with prefix `firebase_`\n          _a[ORIGIN_KEY] = 'firebase', _a.update = true, _a));\n          return [2\n          /*return*/\n          ];\n      }\n    });\n  });\n}\n\nfunction insertScriptTag(dataLayerName) {\n  var script = document.createElement('script'); // We are not providing an analyticsId in the URL because it would trigger a `page_view`\n  // without fid. We will initialize ga-id using gtag (config) command together with fid.\n\n  script.src = GTAG_URL + \"?l=\" + dataLayerName;\n  script.async = true;\n  document.head.appendChild(script);\n}\n/** Get reference to, or create, global datalayer.\r\n * @param dataLayerName Name of datalayer (most often the default, \"_dataLayer\")\r\n */\n\n\nfunction getOrCreateDataLayer(dataLayerName) {\n  // Check for existing dataLayer and create if needed.\n  var dataLayer = [];\n\n  if (Array.isArray(window[dataLayerName])) {\n    dataLayer = window[dataLayerName];\n  } else {\n    window[dataLayerName] = dataLayer;\n  }\n\n  return dataLayer;\n}\n/**\r\n * Wraps a standard gtag function with extra code to wait for completion of\r\n * relevant initialization promises before sending requests.\r\n *\r\n * @param gtagCore Basic gtag function that just appends to dataLayer\r\n * @param initializedIdPromisesMap Map of gaIds to their initialization promises\r\n */\n\n\nfunction wrapGtag(gtagCore, initializedIdPromisesMap) {\n  return function (command, idOrNameOrParams, gtagParams) {\n    // If event, check that relevant initialization promises have completed.\n    if (command === GtagCommand.EVENT) {\n      var initializationPromisesToWaitFor = []; // If there's a 'send_to' param, check if any ID specified matches\n      // a FID we have begun a fetch on.\n\n      if (gtagParams && gtagParams['send_to']) {\n        var gaSendToList = gtagParams['send_to']; // Make it an array if is isn't, so it can be dealt with the same way.\n\n        if (!Array.isArray(gaSendToList)) {\n          gaSendToList = [gaSendToList];\n        }\n\n        for (var _i = 0, gaSendToList_1 = gaSendToList; _i < gaSendToList_1.length; _i++) {\n          var sendToId = gaSendToList_1[_i];\n          var initializationPromise = initializedIdPromisesMap[sendToId]; // Groups will not be in the map.\n\n          if (initializationPromise) {\n            initializationPromisesToWaitFor.push(initializationPromise);\n          } else {\n            // There is an item in 'send_to' that is not associated\n            // directly with an FID, possibly a group.  Empty this array\n            // and let it get populated below.\n            initializationPromisesToWaitFor = [];\n            break;\n          }\n        }\n      } // This will be unpopulated if there was no 'send_to' field , or\n      // if not all entries in the 'send_to' field could be mapped to\n      // a FID. In these cases, wait on all pending initialization promises.\n\n\n      if (initializationPromisesToWaitFor.length === 0) {\n        for (var _a = 0, _b = Object.values(initializedIdPromisesMap); _a < _b.length; _a++) {\n          var idPromise = _b[_a];\n          initializationPromisesToWaitFor.push(idPromise);\n        }\n      } // Run core gtag function with args after all relevant initialization\n      // promises have been resolved.\n\n\n      Promise.all(initializationPromisesToWaitFor) // Workaround for http://b/141370449 - third argument cannot be undefined.\n      .then(function () {\n        return gtagCore(GtagCommand.EVENT, idOrNameOrParams, gtagParams || {});\n      })[\"catch\"](function (e) {\n        return console.error(e);\n      });\n    } else if (command === GtagCommand.CONFIG) {\n      var initializationPromiseToWait = initializedIdPromisesMap[idOrNameOrParams] || Promise.resolve();\n      initializationPromiseToWait.then(function () {\n        gtagCore(GtagCommand.CONFIG, idOrNameOrParams, gtagParams);\n      })[\"catch\"](function (e) {\n        return console.error(e);\n      });\n    } else {\n      // SET command.\n      // Splitting calls for CONFIG and SET to make it clear which signature\n      // Typescript is checking.\n      gtagCore(GtagCommand.SET, idOrNameOrParams);\n    }\n  };\n}\n/**\r\n * Creates global gtag function or wraps existing one if found.\r\n * This wrapped function attaches Firebase instance ID (FID) to gtag 'config' and\r\n * 'event' calls that belong to the GAID associated with this Firebase instance.\r\n *\r\n * @param initializedIdPromisesMap Map of gaId to initialization promises.\r\n * @param dataLayerName Name of global GA datalayer array.\r\n * @param gtagFunctionName Name of global gtag function (\"gtag\" if not user-specified)\r\n */\n\n\nfunction wrapOrCreateGtag(initializedIdPromisesMap, dataLayerName, gtagFunctionName) {\n  // Create a basic core gtag function\n  var gtagCore = function gtagCore() {\n    var _args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      _args[_i] = arguments[_i];\n    } // Must push IArguments object, not an array.\n\n\n    window[dataLayerName].push(arguments);\n  }; // Replace it with existing one if found\n\n\n  if (window[gtagFunctionName] && typeof window[gtagFunctionName] === 'function') {\n    // @ts-ignore\n    gtagCore = window[gtagFunctionName];\n  }\n\n  window[gtagFunctionName] = wrapGtag(gtagCore, initializedIdPromisesMap);\n  return {\n    gtagCore: gtagCore,\n    wrappedGtag: window[gtagFunctionName]\n  };\n}\n/**\r\n * Returns first script tag in DOM matching our gtag url pattern.\r\n */\n\n\nfunction findGtagScriptOnPage() {\n  var scriptTags = window.document.getElementsByTagName('script');\n\n  for (var _i = 0, _a = Object.values(scriptTags); _i < _a.length; _i++) {\n    var tag = _a[_i];\n\n    if (tag.src && tag.src.includes(GTAG_URL)) {\n      return tag;\n    }\n  }\n\n  return null;\n}\n/**\r\n * @license\r\n * Copyright 2019 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nvar _a;\n\nvar ERRORS = (_a = {}, _a[\"no-ga-id\"\n/* NO_GA_ID */\n] = \"\\\"\" + ANALYTICS_ID_FIELD + \"\\\" field is empty in \" + 'Firebase config. Firebase Analytics ' + 'requires this field to contain a valid measurement ID.', _a[\"already-exists\"\n/* ALREADY_EXISTS */\n] = 'A Firebase Analytics instance with the measurement ID ${id} ' + ' already exists. ' + 'Only one Firebase Analytics instance can be created for each measurement ID.', _a[\"already-initialized\"\n/* ALREADY_INITIALIZED */\n] = 'Firebase Analytics has already been initialized.' + 'settings() must be called before initializing any Analytics instance' + 'or it will have no effect.', _a[\"interop-component-reg-failed\"\n/* INTEROP_COMPONENT_REG_FAILED */\n] = 'Firebase Analytics Interop Component failed to instantiate', _a);\nvar ERROR_FACTORY = new ErrorFactory('analytics', 'Analytics', ERRORS);\n/**\r\n * @license\r\n * Copyright 2019 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Maps gaId to FID fetch promises.\r\n */\n\nvar initializedIdPromisesMap = {};\n/**\r\n * Name for window global data layer array used by GA: defaults to 'dataLayer'.\r\n */\n\nvar dataLayerName = 'dataLayer';\n/**\r\n * Name for window global gtag function used by GA: defaults to 'gtag'.\r\n */\n\nvar gtagName = 'gtag';\n/**\r\n * Reproduction of standard gtag function or reference to existing\r\n * gtag function on window object.\r\n */\n\nvar gtagCoreFunction;\n/**\r\n * Wrapper around gtag function that ensures FID is sent with all\r\n * relevant event and config calls.\r\n */\n\nvar wrappedGtagFunction;\n/**\r\n * Flag to ensure page initialization steps (creation or wrapping of\r\n * dataLayer and gtag script) are only run once per page load.\r\n */\n\nvar globalInitDone = false;\n/**\r\n * For testing\r\n */\n\nfunction resetGlobalVars(newGlobalInitDone, newGaInitializedPromise) {\n  if (newGlobalInitDone === void 0) {\n    newGlobalInitDone = false;\n  }\n\n  if (newGaInitializedPromise === void 0) {\n    newGaInitializedPromise = {};\n  }\n\n  globalInitDone = newGlobalInitDone;\n  initializedIdPromisesMap = newGaInitializedPromise;\n  dataLayerName = 'dataLayer';\n  gtagName = 'gtag';\n}\n/**\r\n * This must be run before calling firebase.analytics() or it won't\r\n * have any effect.\r\n * @param options Custom gtag and dataLayer names.\r\n */\n\n\nfunction settings(options) {\n  if (globalInitDone) {\n    throw ERROR_FACTORY.create(\"already-initialized\"\n    /* ALREADY_INITIALIZED */\n    );\n  }\n\n  if (options.dataLayerName) {\n    dataLayerName = options.dataLayerName;\n  }\n\n  if (options.gtagName) {\n    gtagName = options.gtagName;\n  }\n}\n\nfunction factory(app, installations) {\n  var analyticsId = app.options[ANALYTICS_ID_FIELD];\n\n  if (!analyticsId) {\n    throw ERROR_FACTORY.create(\"no-ga-id\"\n    /* NO_GA_ID */\n    );\n  }\n\n  if (initializedIdPromisesMap[analyticsId] != null) {\n    throw ERROR_FACTORY.create(\"already-exists\"\n    /* ALREADY_EXISTS */\n    , {\n      id: analyticsId\n    });\n  }\n\n  if (!globalInitDone) {\n    // Steps here should only be done once per page: creation or wrapping\n    // of dataLayer and global gtag function.\n    // Detect if user has already put the gtag <script> tag on this page.\n    if (!findGtagScriptOnPage()) {\n      insertScriptTag(dataLayerName);\n    }\n\n    getOrCreateDataLayer(dataLayerName);\n\n    var _a = wrapOrCreateGtag(initializedIdPromisesMap, dataLayerName, gtagName),\n        wrappedGtag = _a.wrappedGtag,\n        gtagCore = _a.gtagCore;\n\n    wrappedGtagFunction = wrappedGtag;\n    gtagCoreFunction = gtagCore;\n    globalInitDone = true;\n  } // Async but non-blocking.\n\n\n  initializedIdPromisesMap[analyticsId] = initializeGAId(app, installations, gtagCoreFunction);\n  var analyticsInstance = {\n    app: app,\n    logEvent: function logEvent(eventName, eventParams, options) {\n      return _logEvent(wrappedGtagFunction, analyticsId, eventName, eventParams, options);\n    },\n    setCurrentScreen: function setCurrentScreen(screenName, options) {\n      return _setCurrentScreen(wrappedGtagFunction, analyticsId, screenName, options);\n    },\n    setUserId: function setUserId(id, options) {\n      return _setUserId(wrappedGtagFunction, analyticsId, id, options);\n    },\n    setUserProperties: function setUserProperties(properties, options) {\n      return _setUserProperties(wrappedGtagFunction, analyticsId, properties, options);\n    },\n    setAnalyticsCollectionEnabled: function setAnalyticsCollectionEnabled(enabled) {\n      return _setAnalyticsCollectionEnabled(analyticsId, enabled);\n    }\n  };\n  return analyticsInstance;\n}\n\nvar name = \"@firebase/analytics\";\nvar version = \"0.2.13\";\n/**\r\n * @license\r\n * Copyright 2019 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Type constant for Firebase Analytics.\r\n */\n\nvar ANALYTICS_TYPE = 'analytics';\n\nfunction registerAnalytics(instance) {\n  instance.INTERNAL.registerComponent(new Component(ANALYTICS_TYPE, function (container) {\n    // getImmediate for FirebaseApp will always succeed\n    var app = container.getProvider('app').getImmediate();\n    var installations = container.getProvider('installations').getImmediate();\n    return factory(app, installations);\n  }, \"PUBLIC\"\n  /* PUBLIC */\n  ).setServiceProps({\n    settings: settings,\n    EventName: EventName\n  }));\n  instance.INTERNAL.registerComponent(new Component('analytics-internal', internalFactory, \"PRIVATE\"\n  /* PRIVATE */\n  ));\n  instance.registerVersion(name, version);\n\n  function internalFactory(container) {\n    try {\n      var analytics = container.getProvider(ANALYTICS_TYPE).getImmediate();\n      return {\n        logEvent: analytics.logEvent\n      };\n    } catch (e) {\n      throw ERROR_FACTORY.create(\"interop-component-reg-failed\"\n      /* INTEROP_COMPONENT_REG_FAILED */\n      , {\n        reason: e\n      });\n    }\n  }\n}\n\nregisterAnalytics(firebase);\nexport { factory, registerAnalytics, resetGlobalVars, settings };"],"sourceRoot":""}